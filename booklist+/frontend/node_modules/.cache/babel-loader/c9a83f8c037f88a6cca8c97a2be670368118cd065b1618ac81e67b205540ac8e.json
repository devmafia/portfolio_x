{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';// Початковий стан\nconst initialState={books:[],loading:false,error:null};// Асинхронна дія для отримання книг з бекенду\nexport const fetchBooks=createAsyncThunk('books/fetchBooks',async()=>{const response=await axios.get('/api/books');return response.data;});// Асинхронна дія для додавання книги\nexport const addBook=createAsyncThunk('books/addBook',async newBook=>{const response=await axios.post('/api/books',newBook);return response.data;});// Асинхронна дія для видалення книги\nexport const deleteBook=createAsyncThunk('books/deleteBook',async id=>{await axios.delete(`/api/books/${id}`);return id;});// Асинхронна дія для редагування книги\nexport const editBook=createAsyncThunk('books/editBook',async editedBook=>{const response=await axios.put(`/api/books/${editedBook.id}`,editedBook);return response.data;});// Слайс для книг\nconst bookSlice=createSlice({name:'books',initialState,reducers:{},extraReducers:builder=>{builder// Обробка fetchBooks\n.addCase(fetchBooks.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchBooks.fulfilled,(state,action)=>{state.loading=false;state.books=action.payload;}).addCase(fetchBooks.rejected,(state,action)=>{state.loading=false;state.error=action.error.message||'Failed to fetch books';})// Обробка addBook\n.addCase(addBook.fulfilled,(state,action)=>{state.books.push(action.payload);})// Обробка deleteBook\n.addCase(deleteBook.fulfilled,(state,action)=>{state.books=state.books.filter(book=>book.id!==action.payload);})// Обробка editBook\n.addCase(editBook.fulfilled,(state,action)=>{const index=state.books.findIndex(book=>book.id===action.payload.id);if(index!==-1){state.books[index]=action.payload;}});}});export default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","books","loading","error","fetchBooks","response","get","data","addBook","newBook","post","deleteBook","id","delete","editBook","editedBook","put","bookSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","push","filter","book","index","findIndex","reducer"],"sources":["C:/Users/User/lenovo/htdocs/Flask/booklist/frontend/src/redux/bookSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\ninterface Book {\r\n  id: number;\r\n  title: string;\r\n  author: string;\r\n  genre: string;\r\n  rating: number;\r\n  progress: number;\r\n}\r\n\r\ninterface BookState {\r\n  books: Book[];\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\n// Початковий стан\r\nconst initialState: BookState = {\r\n  books: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\n// Асинхронна дія для отримання книг з бекенду\r\nexport const fetchBooks = createAsyncThunk('books/fetchBooks', async () => {\r\n  const response = await axios.get('/api/books');\r\n  return response.data;\r\n});\r\n\r\n// Асинхронна дія для додавання книги\r\nexport const addBook = createAsyncThunk('books/addBook', async (newBook: Omit<Book, 'id'>) => {\r\n  const response = await axios.post('/api/books', newBook);\r\n  return response.data;\r\n});\r\n\r\n// Асинхронна дія для видалення книги\r\nexport const deleteBook = createAsyncThunk('books/deleteBook', async (id: number) => {\r\n  await axios.delete(`/api/books/${id}`);\r\n  return id;\r\n});\r\n\r\n// Асинхронна дія для редагування книги\r\nexport const editBook = createAsyncThunk('books/editBook', async (editedBook: Book) => {\r\n  const response = await axios.put(`/api/books/${editedBook.id}`, editedBook);\r\n  return response.data;\r\n});\r\n\r\n// Слайс для книг\r\nconst bookSlice = createSlice({\r\n  name: 'books',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Обробка fetchBooks\r\n      .addCase(fetchBooks.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchBooks.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.books = action.payload;\r\n      })\r\n      .addCase(fetchBooks.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message || 'Failed to fetch books';\r\n      })\r\n\r\n      // Обробка addBook\r\n      .addCase(addBook.fulfilled, (state, action) => {\r\n        state.books.push(action.payload);\r\n      })\r\n\r\n      // Обробка deleteBook\r\n      .addCase(deleteBook.fulfilled, (state, action) => {\r\n        state.books = state.books.filter((book) => book.id !== action.payload);\r\n      })\r\n\r\n      // Обробка editBook\r\n      .addCase(editBook.fulfilled, (state, action) => {\r\n        const index = state.books.findIndex((book) => book.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.books[index] = action.payload;\r\n        }\r\n      });\r\n  },\r\n});\r\n\r\nexport default bookSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}